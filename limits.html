<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ—á–Ω–æ–π –º–æ–¥–µ–ª–∏</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f8fafc;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #1e293b;
            margin-bottom: 10px;
        }
        .header p {
            color: #64748b;
            font-size: 16px;
        }
        .heatmap-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        .heatmap {
            flex: 1;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }
        .heatmap-row {
            display: flex;
        }
        .heatmap-cell {
            width: 70px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: 600;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .row-label {
            width: 120px;
            background: #475569;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .col-header {
            width: 70px;
            height: 40px;
            background: #334155;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
        }
        .corner-cell {
            width: 120px;
            height: 40px;
            background: #1e293b;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
        }
        .legend {
            width: 380px;
            background: #f1f5f9;
            border-radius: 8px;
            padding: 20px;
        }
        .legend h3 {
            margin-top: 0;
            color: #1e293b;
            margin-bottom: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 6px;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        .legend-text {
            font-size: 13px;
            color: #374151;
        }
        .stats {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }
        .stats h4 {
            color: #1e293b;
            margin-bottom: 10px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            font-size: 12px;
        }
        .tooltip {
            position: absolute;
            background: #1e293b;
            color: white;
            padding: 12px;
            border-radius: 6px;
            font-size: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            max-width: 320px;
        }
        .insights {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #e0f2fe, #bae6fd);
            border-radius: 8px;
            border-left: 4px solid #0ea5e9;
        }
        .insights h3 {
            color: #0c4a6e;
            margin-top: 0;
        }
        .insights ul {
            color: #164e63;
        }
        .insights li {
            margin-bottom: 8px;
        }
        .limits-table {
            margin-top: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }
        .limits-table h4 {
            margin: 0 0 10px 0;
            color: #1e293b;
            font-size: 14px;
        }
        .limits-table table {
            width: 100%;
            font-size: 12px;
        }
        .limits-table td {
            padding: 4px 8px;
            border-bottom: 1px solid #e2e8f0;
        }
        .example-box {
            margin-top: 15px;
            padding: 15px;
            background: #fef3c7;
            border-radius: 6px;
            border-left: 4px solid #f59e0b;
        }
        .example-box h4 {
            margin: 0 0 10px 0;
            color: #92400e;
            font-size: 14px;
        }
        .example-box .calc {
            font-family: 'Courier New', monospace;
            background: #fffbeb;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–ö–∞—Ä—Ç–∞ –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–π –º–æ–¥–µ–ª–∏</h1>
            <p>–ü–æ–¥–ø–∏—Å–∫–∞ + –∫–æ–º–∏—Å—Å–∏—è —Å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞</p>
        </div>
        
        <div class="heatmap-container">
            <div class="heatmap" id="heatmap"></div>
            
            <div class="legend">
                <h3>–õ–µ–≥–µ–Ω–¥–∞ —Ä–µ—à–µ–Ω–∏–π</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #64748b;"></div>
                    <div class="legend-text"><strong>‚ö´ –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:</strong> –ö–æ–º–∞–Ω–¥—ã &lt;5 —á–µ–ª–æ–≤–µ–∫</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #10b981;"></div>
                    <div class="legend-text"><strong>üü¢ –¢–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–∫–∞:</strong> –í—ã–ø–ª–∞—Ç—ã –≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f59e0b;"></div>
                    <div class="legend-text"><strong>üü° –ì–∏–±—Ä–∏–¥:</strong> –ü–æ–¥–ø–∏—Å–∫–∞ + –∫–æ–º–∏—Å—Å–∏—è —Å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3b82f6;"></div>
                    <div class="legend-text"><strong>üîµ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π:</strong> –û–±–æ—Ä–æ—Ç ‚â• $150k - –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤</div>
                </div>
                
                <div class="limits-table">
                    <h4>üìà –õ–∏–º–∏—Ç—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–∞–Ω–¥—ã:</h4>
                    <table>
                        <tr><td><strong>5-10 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>$2,500</td></tr>
                        <tr><td><strong>11-20 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>$3,000</td></tr>
                        <tr><td><strong>21-30 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>$3,500</td></tr>
                        <tr><td><strong>31-40 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>$4,000</td></tr>
                        <tr><td><strong>41+ —á–µ–ª–æ–≤–µ–∫:</strong></td><td>$4,500</td></tr>
                    </table>
                </div>
                
                <div class="example-box">
                    <h4>üí° –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:</h4>
                    <strong>20 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –ª–∏–º–∏—Ç $3,000:</strong><br>
                    ‚Ä¢ 15 –∏—Å–ø. √ó $2,800 = –≤ –ª–∏–º–∏—Ç–µ<br>
                    ‚Ä¢ 5 –∏—Å–ø. √ó $4,500 = –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ<br>
                    <div class="calc">
                    –ü–æ–¥–ø–∏—Å–∫–∞: 20 √ó $20 = $400<br>
                    –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ: (4500-3000) √ó 5 √ó 2.5% = $187.5<br>
                    <strong>–ò—Ç–æ–≥–æ: $587.5</strong>
                    </div>
                </div>
                
                <div class="stats">
                    <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ—à–µ–Ω–∏—è–º</h4>
                    <div class="stats-grid" id="stats"></div>
                </div>
                
                <div class="insights">
                    <h3>üí° –ü—Ä–∏–Ω—Ü–∏–ø—ã –≥–∏–±—Ä–∏–¥–Ω–æ–π –º–æ–¥–µ–ª–∏</h3>
                    <ul>
                        <li><strong>–°—Ç–∏–º—É–ª —Ä–æ—Å—Ç–∞:</strong> –ß–µ–º –±–æ–ª—å—à–µ –∫–æ–º–∞–Ω–¥–∞, —Ç–µ–º –≤—ã—à–µ –ª–∏–º–∏—Ç –≤—ã–ø–ª–∞—Ç</li>
                        <li><strong>–ì–∏–±–∫–æ—Å—Ç—å:</strong> –ü–æ–¥–ø–∏—Å–∫–∞ + –¥–æ–ø–ª–∞—Ç–∞ –∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è, –∞ –Ω–µ –æ—Ç–∫–∞–∑</li>
                        <li><strong>–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å:</strong> –ü–ª–∞—Ç—è—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Ç–æ, —á—Ç–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç</li>
                        <li><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏—è:</strong> –ö–æ–º–∞–Ω–¥—ã &lt;5 —á–µ–ª–æ–≤–µ–∫ = —Ç–æ–ª—å–∫–æ –∫–æ–º–∏—Å—Å–∏—è</li>
                        <li><strong>–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –∫–ª–∏–µ–Ω—Ç—ã:</strong> –û–±–æ—Ä–æ—Ç ‚â•$150k = –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="tooltip" id="tooltip"></div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ
        const performersRange = Array.from({length: 50}, (_, i) => i + 1);
        const avgPayouts = [1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000];
        
        // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –ª–∏–º–∏—Ç–∞ - —á–µ–º –±–æ–ª—å—à–µ –∫–æ–º–∞–Ω–¥–∞, —Ç–µ–º –≤—ã—à–µ –ª–∏–º–∏—Ç
        function calculateLimit(performers) {
            if (performers < 5) return null; // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
            if (performers <= 10) return 2500; // –ú–∞–ª—ã–µ –∫–æ–º–∞–Ω–¥—ã
            if (performers <= 20) return 3000; // –°—Ä–µ–¥–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã  
            if (performers <= 30) return 3500; // –ö—Ä—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
            if (performers <= 40) return 4000; // –û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
            return 4500; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã
        function analyzeScenario(performers, avgPayout) {
            const monthlyRevenue = performers * avgPayout;
            const limit = calculateLimit(performers);
            
            // –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ª–∏–º–∏—Ç–æ–≤
            if (performers < 5) {
                return { 
                    zone: 'not_applicable', 
                    reason: '–ö–æ–º–∞–Ω–¥–∞ <5 —á–µ–ª–æ–≤–µ–∫',
                    decision: '–¢–æ–ª—å–∫–æ –∫–æ–º–∏—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å',
                    cost: `–ö–æ–º–∏—Å—Å–∏—è: ${(monthlyRevenue * 0.025).toLocaleString()}$`
                };
            }
            
            if (monthlyRevenue >= 150000) {
                return { 
                    zone: 'strategic', 
                    reason: `–û–±–æ—Ä–æ—Ç $${(monthlyRevenue/1000).toFixed(0)}k ‚â• $150k`,
                    decision: '–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç (—Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–∫–∞)',
                    cost: `–ü–æ–¥–ø–∏—Å–∫–∞: ${performers * 20}$`
                };
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ª–∏–º–∏—Ç—ã —Å –≥–∏–±—Ä–∏–¥–Ω–æ–π –º–æ–¥–µ–ª—å—é
            if (avgPayout <= limit) {
                return { 
                    zone: 'subscription_only', 
                    reason: `–í —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞ $${limit.toLocaleString()}`,
                    decision: '–¢–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–∫–∞',
                    cost: `–ü–æ–¥–ø–∏—Å–∫–∞: ${performers * 20}$`
                };
            } else {
                const subscriptionCost = performers * 20;
                const excess = avgPayout - limit;
                const excessCost = excess * performers * 0.025;
                const totalCost = subscriptionCost + excessCost;
                
                return { 
                    zone: 'hybrid', 
                    reason: `–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ $${limit.toLocaleString()} –Ω–∞ $${excess}`,
                    decision: '–ì–∏–±—Ä–∏–¥–Ω–∞—è –º–æ–¥–µ–ª—å',
                    cost: `–ü–æ–¥–ø–∏—Å–∫–∞: ${subscriptionCost}$ + –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ: ${excessCost.toFixed(1)}$ = ${totalCost.toFixed(1)}$`
                };
            }
        }
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —è—á–µ–π–∫–∏
        function getColor(performers, avgPayout) {
            const result = analyzeScenario(performers, avgPayout);
            
            switch(result.zone) {
                case 'not_applicable': return '#64748b'; // –°–µ—Ä—ã–π
                case 'subscription_only': return '#10b981'; // –ó–µ–ª–µ–Ω—ã–π
                case 'hybrid': return '#f59e0b'; // –ñ–µ–ª—Ç—ã–π
                case 'strategic': return '#3b82f6'; // –°–∏–Ω–∏–π
                default: return '#64748b';
            }
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —è—á–µ–π–∫–∏
        function getCellText(performers, avgPayout) {
            const result = analyzeScenario(performers, avgPayout);
            const limit = calculateLimit(performers);
            
            switch(result.zone) {
                case 'not_applicable': return 'N/A';
                case 'subscription_only': return `‚úì${limit}`;
                case 'hybrid': 
                    const excess = Math.round(avgPayout - limit);
                    return `+${excess}`;
                case 'strategic': return '‚òÖSTR';
                default: return '?';
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã
        function createHeatmap() {
            const heatmap = document.getElementById('heatmap');
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫
            const headerRow = document.createElement('div');
            headerRow.className = 'heatmap-row';
            
            const cornerCell = document.createElement('div');
            cornerCell.className = 'corner-cell';
            cornerCell.textContent = '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ / –í—ã–ø–ª–∞—Ç—ã';
            headerRow.appendChild(cornerCell);
            
            avgPayouts.forEach(payout => {
                const cell = document.createElement('div');
                cell.className = 'col-header';
                cell.textContent = `$${payout}`;
                headerRow.appendChild(cell);
            });
            heatmap.appendChild(headerRow);
            
            // –°—Ç—Ä–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            performersRange.forEach(performers => {
                const row = document.createElement('div');
                row.className = 'heatmap-row';
                
                const labelCell = document.createElement('div');
                labelCell.className = 'row-label';
                labelCell.textContent = `${performers} —á–µ–ª.`;
                row.appendChild(labelCell);
                
                avgPayouts.forEach(avgPayout => {
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell';
                    cell.style.backgroundColor = getColor(performers, avgPayout);
                    cell.textContent = getCellText(performers, avgPayout);
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç—É–ª—Ç–∏–ø–∞
                    cell.addEventListener('mouseenter', (e) => showTooltip(e, performers, avgPayout));
                    cell.addEventListener('mouseleave', hideTooltip);
                    cell.addEventListener('mousemove', moveTooltip);
                    
                    row.appendChild(cell);
                });
                
                heatmap.appendChild(row);
            });
        }
        
        // –¢—É–ª—Ç–∏–ø
        function showTooltip(e, performers, avgPayout) {
            const tooltip = document.getElementById('tooltip');
            const result = analyzeScenario(performers, avgPayout);
            const monthlyRevenue = performers * avgPayout;
            const limit = calculateLimit(performers);
            
            let limitText = '';
            if (limit) {
                limitText = `<br><strong>–õ–∏–º–∏—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥—ã:</strong> $${limit.toLocaleString()}`;
            }
            
            tooltip.innerHTML = `
                <strong>${performers} –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</strong><br>
                –°—Ä–µ–¥–Ω—è—è –≤—ã–ø–ª–∞—Ç–∞: $${avgPayout.toLocaleString()}<br>
                <strong>–û–±–æ—Ä–æ—Ç –∫–ª–∏–µ–Ω—Ç–∞: $${monthlyRevenue.toLocaleString()}/–º–µ—Å</strong>${limitText}<br>
                <br>
                <strong style="color: #fbbf24;">${result.decision}</strong><br>
                <em>${result.reason}</em><br>
                <br>
                <strong>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${result.cost}</strong>
            `;
            tooltip.style.opacity = '1';
            moveTooltip(e);
        }
        
        function hideTooltip() {
            document.getElementById('tooltip').style.opacity = '0';
        }
        
        function moveTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.left = e.pageX + 10 + 'px';
            tooltip.style.top = e.pageY - 10 + 'px';
        }
        
        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–æ–Ω–∞–º
        function calculateStats() {
            const zones = {
                not_applicable: 0,
                subscription_only: 0,
                hybrid: 0,
                strategic: 0
            };
            
            performersRange.forEach(performers => {
                avgPayouts.forEach(avgPayout => {
                    const result = analyzeScenario(performers, avgPayout);
                    zones[result.zone]++;
                });
            });
            
            const statsDiv = document.getElementById('stats');
            const total = Object.values(zones).reduce((a, b) => a + b, 0);
            
            const zoneNames = {
                'not_applicable': '‚ö´ –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è',
                'subscription_only': 'üü¢ –¢–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–∫–∞',
                'hybrid': 'üü° –ì–∏–±—Ä–∏–¥–Ω–∞—è –º–æ–¥–µ–ª—å',
                'strategic': 'üîµ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ'
            };
            
            Object.entries(zones).forEach(([zone, count]) => {
                const percentage = ((count / total) * 100).toFixed(1);
                
                const statItem = document.createElement('div');
                statItem.innerHTML = `<strong>${zoneNames[zone]}:</strong> ${count} (${percentage}%)`;
                statsDiv.appendChild(statItem);
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        createHeatmap();
        calculateStats();
    </script>
</body>
</html>