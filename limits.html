<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ—á–Ω–æ–π –º–æ–¥–µ–ª–∏</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f8fafc;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #1e293b;
            margin-bottom: 10px;
        }
        .header p {
            color: #64748b;
            font-size: 16px;
        }
        .heatmap-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        .heatmap {
            flex: 1;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }
        .heatmap-row {
            display: flex;
        }
        .heatmap-cell {
            width: 70px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: 600;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .row-label {
            width: 120px;
            background: #475569;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .col-header {
            width: 70px;
            height: 40px;
            background: #334155;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
        }
        .corner-cell {
            width: 120px;
            height: 40px;
            background: #1e293b;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 10px;
        }
        .legend {
            width: 340px;
            background: #f1f5f9;
            border-radius: 8px;
            padding: 20px;
        }
        .legend h3 {
            margin-top: 0;
            color: #1e293b;
            margin-bottom: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 6px;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        .legend-text {
            font-size: 13px;
            color: #374151;
        }
        .stats {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }
        .stats h4 {
            color: #1e293b;
            margin-bottom: 10px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            font-size: 12px;
        }
        .tooltip {
            position: absolute;
            background: #1e293b;
            color: white;
            padding: 12px;
            border-radius: 6px;
            font-size: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            max-width: 300px;
        }
        .insights {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #e0f2fe, #bae6fd);
            border-radius: 8px;
            border-left: 4px solid #0ea5e9;
        }
        .insights h3 {
            color: #0c4a6e;
            margin-top: 0;
        }
        .insights ul {
            color: #164e63;
        }
        .insights li {
            margin-bottom: 8px;
        }
        .limits-table {
            margin-top: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }
        .limits-table h4 {
            margin: 0 0 10px 0;
            color: #1e293b;
            font-size: 14px;
        }
        .limits-table table {
            width: 100%;
            font-size: 12px;
        }
        .limits-table td {
            padding: 4px 8px;
            border-bottom: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–ö–∞—Ä—Ç–∞ –ª–∏–º–∏—Ç–æ–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ—á–Ω–æ–π –º–æ–¥–µ–ª–∏</h1>
            <p>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–∏–º–∏—Ç–æ–≤ –≤—ã–ø–ª–∞—Ç</p>
        </div>
        
        <div class="heatmap-container">
            <div class="heatmap" id="heatmap"></div>
            
            <div class="legend">
                <h3>–õ–µ–≥–µ–Ω–¥–∞ —Ä–µ—à–µ–Ω–∏–π</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #64748b;"></div>
                    <div class="legend-text"><strong>‚ö´ –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:</strong> –ö–æ–º–∞–Ω–¥—ã &lt;5 —á–µ–ª–æ–≤–µ–∫</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #10b981;"></div>
                    <div class="legend-text"><strong>üü¢ –ü–æ–¥–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞:</strong> –í—ã–ø–ª–∞—Ç—ã ‚â§ $3000 –∏–ª–∏ –≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3b82f6;"></div>
                    <div class="legend-text"><strong>üîµ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç:</strong> –û–±–æ—Ä–æ—Ç ‚â• $150k - –ª–∏–º–∏—Ç—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc2626;"></div>
                    <div class="legend-text"><strong>üî¥ –¢–æ–ª—å–∫–æ –∫–æ–º–∏—Å—Å–∏—è:</strong> –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –≤—ã–ø–ª–∞—Ç</div>
                </div>
                
                <div class="limits-table">
                    <h4>üìã –õ–∏–º–∏—Ç—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–æ–º–∞–Ω–¥—ã:</h4>
                    <table>
                        <tr><td><strong>5-10 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>–¥–æ $4,000</td></tr>
                        <tr><td><strong>11-20 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>–¥–æ $3,500</td></tr>
                        <tr><td><strong>21-30 —á–µ–ª–æ–≤–µ–∫:</strong></td><td>–¥–æ $3,000</td></tr>
                        <tr><td><strong>31+ —á–µ–ª–æ–≤–µ–∫:</strong></td><td>–¥–æ $2,500</td></tr>
                    </table>
                </div>
                
                <div class="stats">
                    <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ—à–µ–Ω–∏—è–º</h4>
                    <div class="stats-grid" id="stats"></div>
                </div>
                
                <div class="insights">
                    <h3>üí° –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤</h3>
                    <ul>
                        <li><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏–µ 1:</strong> –í—ã–ø–ª–∞—Ç—ã ‚â§ $3,000 - –ª–∏–º–∏—Ç—ã –ù–ï –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è (–Ω–µ –≤—ã–≥–ª—è–¥–∏–º –∂–∞–¥–Ω—ã–º–∏)</li>
                        <li><strong>–ò—Å–∫–ª—é—á–µ–Ω–∏–µ 2:</strong> –û–±–æ—Ä–æ—Ç ‚â• $150,000/–º–µ—Å - –ª–∏–º–∏—Ç—ã –ù–ï –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è (—Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –∫–ª–∏–µ–Ω—Ç—ã)</li>
                        <li><strong>–õ–∏–º–∏—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã:</strong> –ß–µ–º –±–æ–ª—å—à–µ –∫–æ–º–∞–Ω–¥–∞, —Ç–µ–º —Å—Ç—Ä–æ–∂–µ –ª–∏–º–∏—Ç</li>
                        <li><strong>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–æ–º–∏—Å—Å–∏–æ–Ω–Ω—É—é –º–æ–¥–µ–ª—å</li>
                        <li><strong>–ö–æ–º–∞–Ω–¥—ã &lt;5 —á–µ–ª–æ–≤–µ–∫:</strong> –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (—Ä–∏—Å–∫ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–∞)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="tooltip" id="tooltip"></div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ
        const performersRange = Array.from({length: 50}, (_, i) => i + 1);
        const avgPayouts = [1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000];
        
        // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –ª–∏–º–∏—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã
        function calculateLimit(performers) {
            if (performers < 5) return null; // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
            if (performers <= 10) return 4000; // –ú–∞–ª—ã–µ –∫–æ–º–∞–Ω–¥—ã
            if (performers <= 20) return 3500; // –°—Ä–µ–¥–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã  
            if (performers <= 30) return 3000; // –ö—Ä—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
            return 2500; // –û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã
        function analyzeScenario(performers, avgPayout) {
            const monthlyRevenue = performers * avgPayout;
            const limit = calculateLimit(performers);
            
            // –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ª–∏–º–∏—Ç–æ–≤
            if (performers < 5) {
                return { 
                    zone: 'not_applicable', 
                    reason: '–ö–æ–º–∞–Ω–¥–∞ <5 —á–µ–ª–æ–≤–µ–∫',
                    decision: '–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è'
                };
            }
            
            if (avgPayout <= 3000) {
                return { 
                    zone: 'subscription_allowed_low', 
                    reason: '–í—ã–ø–ª–∞—Ç—ã ‚â§ $3000',
                    decision: '–ü–æ–¥–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ)'
                };
            }
            
            if (monthlyRevenue >= 150000) {
                return { 
                    zone: 'strategic', 
                    reason: `–û–±–æ—Ä–æ—Ç $${(monthlyRevenue/1000).toFixed(0)}k ‚â• $150k`,
                    decision: '–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç (–±–µ–∑ –ª–∏–º–∏—Ç–æ–≤)'
                };
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ª–∏–º–∏—Ç—ã
            if (avgPayout <= limit) {
                return { 
                    zone: 'subscription_allowed', 
                    reason: `–í —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞ $${limit.toLocaleString()}`,
                    decision: '–ü–æ–¥–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞'
                };
            } else {
                return { 
                    zone: 'commission_only', 
                    reason: `–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç $${limit.toLocaleString()}`,
                    decision: '–¢–æ–ª—å–∫–æ –∫–æ–º–∏—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å'
                };
            }
        }
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —è—á–µ–π–∫–∏
        function getColor(performers, avgPayout) {
            const result = analyzeScenario(performers, avgPayout);
            
            switch(result.zone) {
                case 'not_applicable': return '#64748b'; // –°–µ—Ä—ã–π
                case 'subscription_allowed_low': return '#10b981'; // –ó–µ–ª–µ–Ω—ã–π
                case 'subscription_allowed': return '#10b981'; // –ó–µ–ª–µ–Ω—ã–π
                case 'strategic': return '#3b82f6'; // –°–∏–Ω–∏–π
                case 'commission_only': return '#dc2626'; // –ö—Ä–∞—Å–Ω—ã–π
                default: return '#64748b';
            }
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —è—á–µ–π–∫–∏
        function getCellText(performers, avgPayout) {
            const result = analyzeScenario(performers, avgPayout);
            const limit = calculateLimit(performers);
            
            switch(result.zone) {
                case 'not_applicable': return 'N/A';
                case 'subscription_allowed_low': return '‚úì LOW';
                case 'subscription_allowed': return `‚úì ${limit}`;
                case 'strategic': return '‚òÖ STR';
                case 'commission_only': return `‚úó ${limit}`;
                default: return '?';
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã
        function createHeatmap() {
            const heatmap = document.getElementById('heatmap');
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫
            const headerRow = document.createElement('div');
            headerRow.className = 'heatmap-row';
            
            const cornerCell = document.createElement('div');
            cornerCell.className = 'corner-cell';
            cornerCell.textContent = '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ / –í—ã–ø–ª–∞—Ç—ã';
            headerRow.appendChild(cornerCell);
            
            avgPayouts.forEach(payout => {
                const cell = document.createElement('div');
                cell.className = 'col-header';
                cell.textContent = `$${payout}`;
                headerRow.appendChild(cell);
            });
            heatmap.appendChild(headerRow);
            
            // –°—Ç—Ä–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            performersRange.forEach(performers => {
                const row = document.createElement('div');
                row.className = 'heatmap-row';
                
                const labelCell = document.createElement('div');
                labelCell.className = 'row-label';
                labelCell.textContent = `${performers} —á–µ–ª.`;
                row.appendChild(labelCell);
                
                avgPayouts.forEach(avgPayout => {
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell';
                    cell.style.backgroundColor = getColor(performers, avgPayout);
                    cell.textContent = getCellText(performers, avgPayout);
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç—É–ª—Ç–∏–ø–∞
                    cell.addEventListener('mouseenter', (e) => showTooltip(e, performers, avgPayout));
                    cell.addEventListener('mouseleave', hideTooltip);
                    cell.addEventListener('mousemove', moveTooltip);
                    
                    row.appendChild(cell);
                });
                
                heatmap.appendChild(row);
            });
        }
        
        // –¢—É–ª—Ç–∏–ø
        function showTooltip(e, performers, avgPayout) {
            const tooltip = document.getElementById('tooltip');
            const result = analyzeScenario(performers, avgPayout);
            const monthlyRevenue = performers * avgPayout;
            const limit = calculateLimit(performers);
            
            let limitText = '';
            if (limit) {
                limitText = `<br><strong>–õ–∏–º–∏—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥—ã:</strong> $${limit.toLocaleString()}`;
            }
            
            tooltip.innerHTML = `
                <strong>${performers} –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</strong><br>
                –°—Ä–µ–¥–Ω—è—è –≤—ã–ø–ª–∞—Ç–∞: $${avgPayout.toLocaleString()}<br>
                <strong>–û–±–æ—Ä–æ—Ç –∫–ª–∏–µ–Ω—Ç–∞: $${monthlyRevenue.toLocaleString()}/–º–µ—Å</strong>${limitText}<br>
                <br>
                <strong style="color: #fbbf24;">–†–µ—à–µ–Ω–∏–µ: ${result.decision}</strong><br>
                <em>–ü—Ä–∏—á–∏–Ω–∞: ${result.reason}</em>
            `;
            tooltip.style.opacity = '1';
            moveTooltip(e);
        }
        
        function hideTooltip() {
            document.getElementById('tooltip').style.opacity = '0';
        }
        
        function moveTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.left = e.pageX + 10 + 'px';
            tooltip.style.top = e.pageY - 10 + 'px';
        }
        
        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–æ–Ω–∞–º
        function calculateStats() {
            const zones = {
                not_applicable: 0,
                subscription_allowed_low: 0,
                subscription_allowed: 0,
                strategic: 0,
                commission_only: 0
            };
            
            performersRange.forEach(performers => {
                avgPayouts.forEach(avgPayout => {
                    const result = analyzeScenario(performers, avgPayout);
                    zones[result.zone]++;
                });
            });
            
            const statsDiv = document.getElementById('stats');
            const total = Object.values(zones).reduce((a, b) => a + b, 0);
            
            const zoneNames = {
                'not_applicable': '‚ö´ –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è',
                'subscription_allowed_low': 'üü¢ –ü–æ–¥–ø–∏—Å–∫–∞ (‚â§$3k)',
                'subscription_allowed': 'üü¢ –ü–æ–¥–ø–∏—Å–∫–∞ (–ª–∏–º–∏—Ç)',
                'strategic': 'üîµ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ',
                'commission_only': 'üî¥ –¢–æ–ª—å–∫–æ –∫–æ–º–∏—Å—Å–∏—è'
            };
            
            Object.entries(zones).forEach(([zone, count]) => {
                const percentage = ((count / total) * 100).toFixed(1);
                
                const statItem = document.createElement('div');
                statItem.innerHTML = `<strong>${zoneNames[zone]}:</strong> ${count} (${percentage}%)`;
                statsDiv.appendChild(statItem);
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        createHeatmap();
        calculateStats();
    </script>
</body>
</html>